<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI作业批改原型 - 课程详情</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#165DFF',
                        secondary: '#6B7280',
                        accent: '#3B82F6',
                        dark: '#1F2937',
                        light: '#F3F4F6',
                    },
                    fontFamily: {
                        inter: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
</head>
<body class="flex h-screen bg-gray-100">

    <!-- 左侧导航栏 (Course Details) -->
    <div class="w-64 bg-white shadow-md">
        <div class="p-4 border-b">
            <div class="flex items-center space-x-2">
                <div class="bg-primary text-white h-10 w-10 rounded-lg flex items-center justify-center">
                    <i class="fa fa-book text-xl"></i>
                </div>
                <div class="flex items-end justify-between w-full">
                    <h1 class="text-xl font-bold text-primary">FineClass帆课</h1>
                    <p class="text-xs text-gray-500">学生端</p>
                </div>
            </div>
        </div>
        <nav class="mt-4">
            <a href="student_homepage.html" class="flex items-center py-2 px-4 text-gray-700 hover:bg-gray-200">
                <i class="fas fa-graduation-cap mr-3"></i>我的课程
            </a>
             <a href="student_class_start.html" class="flex items-center py-2 px-4 text-gray-700 hover:bg-gray-200">
                <i class="fas fa-chalkboard-teacher mr-3"></i>开始上课
            </a>
            <a href="student_notification.html" class="flex items-center py-2 px-4 text-gray-700 hover:bg-gray-200">
                 <i class="fas fa-bell mr-3"></i>通知
            </a>
            <!-- 其他可能的导航项 -->
        </nav>
    </div>

    <!-- 右侧主面板 (Course Details) -->
    <div class="flex-1 flex flex-col">
        <!-- 面包屑导航 (Course Details) -->
        <header class="bg-white shadow-sm p-4">
            <nav class="text-sm text-gray-500">
                <a href="student_homepage.html" class="hover:underline">我的课程</a> &gt;
                <span class="font-semibold text-gray-700">[课程名称 (班级班号)]</span>
            </nav>
        </header>

        <!-- 主内容区域 (Course Details) -->
        <main class="flex-1 p-6 overflow-y-auto">
            <!-- Tabs for 作业 and 课件 -->
            <div class="flex border-b border-gray-200 mb-6">
                <button class="py-2 px-4 text-sm font-medium text-gray-700 border-b-2 border-blue-500">课程作业</button>
                <button class="py-2 px-4 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300">课堂资料</button>
                <button class="py-2 px-4 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300">课程报告</button>
                <button class="py-2 px-4 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300">AI错题本</button>
            </div>

            <!-- Content area based on selected tab -->
            <div id="assignment-content">
                <!-- 作业卡片布局 -->
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- 第十周作业 -->
                    <div class="assignment-card w-full bg-white rounded-lg shadow-md overflow-hidden flex flex-col border border-gray-200 cursor-pointer group transition-transform duration-300 hover:-translate-y-2">
                        <div class="relative w-full bg-white p-6 flex flex-col justify-between h-48">
                            <p class="text-gray-900 text-lg font-bold overflow-hidden text-ellipsis whitespace-nowrap pr-16">第十周作业</p>
                            <div class="absolute top-4 right-4 bg-yellow-100 text-yellow-800 text-xs font-semibold px-2.5 py-0.5 rounded flex-shrink-0">未提交</div>
                            <div class="text-sm text-gray-600 flex-grow flex flex-col justify-end">
                                <p>发布: 2023-11-22</p>
                                <p>截止: 2023-11-29</p>
                            </div>
                            <div class="absolute bottom-4 right-4 text-2xl font-bold text-gray-400">-</div>
                            <!-- 悬停按钮 -->
                            <div class="absolute right-4 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200">
                                <button class="assignment-action-button bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">
                                    提交作业
                                </button>
                            </div>
                        </div>
                    </div>
                    <!-- 第九周作业 -->
                    <div class="assignment-card w-full bg-white rounded-lg shadow-md overflow-hidden flex flex-col border border-gray-200 cursor-pointer group transition-transform duration-300 hover:-translate-y-2">
                        <div class="relative w-full bg-white p-6 flex flex-col justify-between h-48">
                            <p class="text-gray-900 text-lg font-bold overflow-hidden text-ellipsis whitespace-nowrap pr-16">第九周作业</p>
                            <div class="absolute top-4 right-4 bg-red-100 text-red-800 text-xs font-semibold px-2.5 py-0.5 rounded flex-shrink-0">已逾期</div>
                            <div class="text-sm text-gray-600 flex-grow flex flex-col justify-end">
                                <p>发布: 2023-11-19</p>
                                <p>截止: 2023-11-26</p>
                            </div>
                            <div class="absolute bottom-4 right-4 text-2xl font-bold text-gray-400">-</div>
                            <!-- 悬停按钮 -->
                            <div class="absolute right-4 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200">
                                <button class="assignment-action-button bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">
                                    提交作业
                                </button>
                            </div>
                        </div>
                    </div>
                    <!-- 第八周作业 -->
                    <div class="assignment-card w-full bg-white rounded-lg shadow-md overflow-hidden flex flex-col border border-gray-200 cursor-pointer group transition-transform duration-300 hover:-translate-y-2">
                        <div class="relative w-full bg-white p-6 flex flex-col justify-between h-48">
                            <p class="text-gray-900 text-lg font-bold overflow-hidden text-ellipsis whitespace-nowrap pr-16">第八周作业</p>
                            <div class="absolute top-4 right-4 bg-green-100 text-green-800 text-xs font-semibold px-2.5 py-0.5 rounded flex-shrink-0">已批改</div>
                            <div class="text-sm text-gray-600 flex-grow flex flex-col justify-end">
                                <p>发布: 2023-11-15</p>
                                <p>截止: 2023-11-22</p>
                            </div>
                            <div class="absolute bottom-4 right-4 text-2xl font-bold text-green-500">95</div>
                            <!-- 悬停按钮 -->
                            <div class="absolute right-4 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200">
                                <button class="assignment-action-button bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">
                                    查看反馈
                                </button>
                            </div>
                        </div>
                    </div>
                    <!-- 第七周作业 -->
                    <div class="assignment-card w-full bg-white rounded-lg shadow-md overflow-hidden flex flex-col border border-gray-200 cursor-pointer group transition-transform duration-300 hover:-translate-y-2">
                        <div class="relative w-full bg-white p-6 flex flex-col justify-between h-48">
                            <p class="text-gray-900 text-lg font-bold overflow-hidden text-ellipsis whitespace-nowrap pr-16">第七周作业</p>
                            <div class="absolute top-4 right-4 bg-blue-100 text-blue-800 text-xs font-semibold px-2.5 py-0.5 rounded flex-shrink-0">已提交</div>
                            <div class="text-sm text-gray-600 flex-grow flex flex-col justify-end">
                                <p>发布: 2023-11-12</p>
                                <p>截止: 2023-11-19</p>
                            </div>
                            <div class="absolute bottom-4 right-4 text-2xl font-bold text-gray-400">-</div>
                            <!-- 悬停按钮 -->
                            <div class="absolute right-4 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200">
                                <button class="assignment-action-button bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">
                                    修改提交
                                </button>
                            </div>
                        </div>
                    </div>
                    <!-- 第六周作业 -->
                    <div class="assignment-card w-full bg-white rounded-lg shadow-md overflow-hidden flex flex-col border border-gray-200 cursor-pointer group transition-transform duration-300 hover:-translate-y-2">
                        <div class="relative w-full bg-white p-6 flex flex-col justify-between h-48">
                            <p class="text-gray-900 text-lg font-bold overflow-hidden text-ellipsis whitespace-nowrap pr-16">第六周作业</p>
                            <div class="absolute top-4 right-4 bg-green-100 text-green-800 text-xs font-semibold px-2.5 py-0.5 rounded flex-shrink-0">已批改</div>
                            <div class="text-sm text-gray-600 flex-grow flex flex-col justify-end">
                                <p>发布: 2023-11-08</p>
                                <p>截止: 2023-11-15</p>
                            </div>
                            <div class="absolute bottom-4 right-4 text-2xl font-bold text-blue-500">83</div>
                            <!-- 悬停按钮 -->
                            <div class="absolute right-4 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200">
                                <button class="assignment-action-button bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">
                                    查看反馈
                                </button>
                            </div>
                        </div>
                    </div>
                    <!-- 第五周作业 -->
                    <div class="assignment-card w-full bg-white rounded-lg shadow-md overflow-hidden flex flex-col border border-gray-200 cursor-pointer group transition-transform duration-300 hover:-translate-y-2">
                        <div class="relative w-full bg-white p-6 flex flex-col justify-between h-48">
                            <p class="text-gray-900 text-lg font-bold overflow-hidden text-ellipsis whitespace-nowrap pr-16">第五周作业</p>
                            <div class="absolute top-4 right-4 bg-red-100 text-red-800 text-xs font-semibold px-2.5 py-0.5 rounded flex-shrink-0">已逾期</div>
                            <div class="text-sm text-gray-600 flex-grow flex flex-col justify-end">
                                <p>发布: 2023-11-05</p>
                                <p>截止: 2023-11-12</p>
                            </div>
                            <div class="absolute bottom-4 right-4 text-2xl font-bold text-gray-400">-</div>
                            <!-- 悬停按钮 -->
                            <div class="absolute right-4 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200">
                                <button class="assignment-action-button bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">
                                    提交作业
                                </button>
                            </div>
                        </div>
                    </div>
                    <!-- 第四周作业 -->
                    <div class="assignment-card w-full bg-white rounded-lg shadow-md overflow-hidden flex flex-col border border-gray-200 cursor-pointer group transition-transform duration-300 hover:-translate-y-2">
                        <div class="relative w-full bg-white p-6 flex flex-col justify-between h-48">
                            <p class="text-gray-900 text-lg font-bold overflow-hidden text-ellipsis whitespace-nowrap pr-16">第四周作业</p>
                            <div class="absolute top-4 right-4 bg-green-100 text-green-800 text-xs font-semibold px-2.5 py-0.5 rounded flex-shrink-0">已批改</div>
                            <div class="text-sm text-gray-600 flex-grow flex flex-col justify-end">
                                <p>发布: 2023-11-01</p>
                                <p>截止: 2023-11-08</p>
                            </div>
                            <div class="absolute bottom-4 right-4 text-2xl font-bold text-yellow-500">72</div>
                            <!-- 悬停按钮 -->
                            <div class="absolute right-4 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200">
                                <button class="assignment-action-button bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">
                                    查看反馈
                                </button>
                            </div>
                        </div>
                    </div>
                    <!-- 第三周作业 -->
                    <div class="assignment-card w-full bg-white rounded-lg shadow-md overflow-hidden flex flex-col border border-gray-200 cursor-pointer group transition-transform duration-300 hover:-translate-y-2">
                        <div class="relative w-full bg-white p-6 flex flex-col justify-between h-48">
                            <p class="text-gray-900 text-lg font-bold overflow-hidden text-ellipsis whitespace-nowrap pr-16">第三周作业</p>
                            <div class="absolute top-4 right-4 bg-green-100 text-green-800 text-xs font-semibold px-2.5 py-0.5 rounded flex-shrink-0">已批改</div>
                            <div class="text-sm text-gray-600 flex-grow flex flex-col justify-end">
                                <p>发布: 2023-10-25</p>
                                <p>截止: 2023-11-01</p>
                            </div>
                            <div class="absolute bottom-4 right-4 text-2xl font-bold text-orange-500">67</div>
                            <!-- 悬停按钮 -->
                            <div class="absolute right-4 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200">
                                <button class="assignment-action-button bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">
                                    查看反馈
                                </button>
                            </div>
                        </div>
                    </div>
                    <!-- 第二周作业 -->
                    <div class="assignment-card w-full bg-white rounded-lg shadow-md overflow-hidden flex flex-col border border-gray-200 cursor-pointer group transition-transform duration-300 hover:-translate-y-2">
                        <div class="relative w-full bg-white p-6 flex flex-col justify-between h-48">
                            <p class="text-gray-900 text-lg font-bold overflow-hidden text-ellipsis whitespace-nowrap pr-16">第二周作业</p>
                            <div class="absolute top-4 right-4 bg-green-100 text-green-800 text-xs font-semibold px-2.5 py-0.5 rounded flex-shrink-0">已批改</div>
                            <div class="text-sm text-gray-600 flex-grow flex flex-col justify-end">
                                <p>发布: 2023-10-18</p>
                                <p>截止: 2023-10-25</p>
                            </div>
                            <div class="absolute bottom-4 right-4 text-2xl font-bold text-red-500">56</div>
                            <!-- 悬停按钮 -->
                            <div class="absolute right-4 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200">
                                <button class="assignment-action-button bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">
                                    查看反馈
                                </button>
                            </div>
                        </div>
                    </div>
                    <!-- 第一周作业 -->
                    <div class="assignment-card w-full bg-white rounded-lg shadow-md overflow-hidden flex flex-col border border-gray-200 cursor-pointer group transition-transform duration-300 hover:-translate-y-2">
                        <div class="relative w-full bg-white p-6 flex flex-col justify-between h-48">
                            <p class="text-gray-900 text-lg font-bold overflow-hidden text-ellipsis whitespace-nowrap pr-16">第一周作业</p>
                            <div class="absolute top-4 right-4 bg-green-100 text-green-800 text-xs font-semibold px-2.5 py-0.5 rounded flex-shrink-0">已批改</div>
                            <div class="text-sm text-gray-600 flex-grow flex flex-col justify-end">
                                <p>发布: 2023-10-11</p>
                                <p>截止: 2023-10-18</p>
                            </div>
                            <div class="absolute bottom-4 right-4 text-2xl font-bold text-green-500">96</div>
                            <!-- 悬停按钮 -->
                            <div class="absolute right-4 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200">
                                <button class="assignment-action-button bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">
                                    查看反馈
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 课件内容区域 -->
            <div id="courseware-content" class="hidden">
                <!-- 课堂大纲模块 -->
                <div class="mb-8">
                    <h2 class="text-xl font-semibold mb-4">课堂大纲</h2>
                    <!-- 第一页课堂大纲 -->
                    <div class="flex items-center space-x-4 overflow-x-hidden pb-4">
                        <!-- 课堂大纲卡片 -->
                        <div class="flex-none w-64 bg-white rounded-lg shadow-md overflow-hidden flex flex-col border border-gray-200 cursor-pointer" onclick="window.location.href='student_class_details.html?id=1'">
                            <div class="w-full h-32 bg-gray-200 flex items-center justify-center text-gray-500">
                                缩略图
                            </div>
                             <div class="p-2 text-center bg-gray-50 border-t border-gray-200">
                                <p class="text-sm text-gray-700">2023.11.22</p>
                            </div>
                        </div>
                        <div class="flex-none w-64 bg-white rounded-lg shadow-md overflow-hidden flex flex-col border border-gray-200 cursor-pointer" onclick="window.location.href='student_class_details.html?id=2'">
                            <div class="w-full h-32 bg-gray-200 flex items-center justify-center text-gray-500">
                                缩略图
                            </div>
                             <div class="p-2 text-center bg-gray-50 border-t border-gray-200">
                                <p class="text-sm text-gray-700">2023.11.15</p>
                            </div>
                        </div>
                        <div class="flex-none w-64 bg-white rounded-lg shadow-md overflow-hidden flex flex-col border border-gray-200 cursor-pointer" onclick="window.location.href='student_class_details.html?id=3'">
                            <div class="w-full h-32 bg-gray-200 flex items-center justify-center text-gray-500">
                                缩略图
                            </div>
                             <div class="p-2 text-center bg-gray-50 border-t border-gray-200">
                                <p class="text-sm text-gray-700">2023.11.08</p>
                            </div>
                        </div>
                        <div class="flex-none w-64 bg-white rounded-lg shadow-md overflow-hidden flex flex-col border border-gray-200 cursor-pointer" onclick="window.location.href='student_class_details.html?id=4'">
                            <div class="w-full h-32 bg-gray-200 flex items-center justify-center text-gray-500">
                                缩略图
                            </div>
                             <div class="p-2 text-center bg-gray-50 border-t border-gray-200">
                                <p class="text-sm text-gray-700">2023.11.01</p>
                            </div>
                        </div>
                        <!-- 更多课堂大纲按钮 -->
                        <div id="next-outline-page" class="flex-none w-12 flex items-center justify-center cursor-pointer" title="点击查看更多课堂大纲">
                            <i class="fas fa-chevron-circle-right text-gray-500 text-2xl hover:text-gray-700"></i>
                        </div>
                    </div>

                    <!-- 隐藏的课堂大纲 -->
                    <div id="hidden-outlines" class="hidden">
                        <div class="flex items-center space-x-4 overflow-x-hidden pb-4">
                            <!-- 返回箭头 -->
                            <div id="prev-outline-page" class="flex-none w-12 flex items-center justify-center cursor-pointer" title="返回上一页">
                                <i class="fas fa-chevron-circle-left text-gray-500 text-2xl hover:text-gray-700"></i>
                            </div>
                            <!-- 课堂大纲卡片 -->
                            <div class="flex-none w-64 bg-white rounded-lg shadow-md overflow-hidden flex flex-col border border-gray-200 cursor-pointer" onclick="window.location.href='student_class_details.html?id=5'">
                                <div class="w-full h-32 bg-gray-200 flex items-center justify-center text-gray-500">
                                    缩略图
                                </div>
                                 <div class="p-2 text-center bg-gray-50 border-t border-gray-200">
                                    <p class="text-sm text-gray-700">2023.10.25</p>
                                </div>
                            </div>
                            <div class="flex-none w-64 bg-white rounded-lg shadow-md overflow-hidden flex flex-col border border-gray-200 cursor-pointer" onclick="window.location.href='student_class_details.html?id=6'">
                                <div class="w-full h-32 bg-gray-200 flex items-center justify-center text-gray-500">
                                    缩略图
                                </div>
                                 <div class="p-2 text-center bg-gray-50 border-t border-gray-200">
                                    <p class="text-sm text-gray-700">2023.10.18</p>
                                </div>
                            </div>
                            <div class="flex-none w-64 bg-white rounded-lg shadow-md overflow-hidden flex flex-col border border-gray-200 cursor-pointer" onclick="window.location.href='student_class_details.html?id=7'">
                                <div class="w-full h-32 bg-gray-200 flex items-center justify-center text-gray-500">
                                    缩略图
                                </div>
                                 <div class="p-2 text-center bg-gray-50 border-t border-gray-200">
                                    <p class="text-sm text-gray-700">2023.10.11</p>
                                </div>
                            </div>
                            <div class="flex-none w-64 bg-white rounded-lg shadow-md overflow-hidden flex flex-col border border-gray-200 cursor-pointer" onclick="window.location.href='student_class_details.html?id=8'">
                                <div class="w-full h-32 bg-gray-200 flex items-center justify-center text-gray-500">
                                    缩略图
                                </div>
                                 <div class="p-2 text-center bg-gray-50 border-t border-gray-200">
                                    <p class="text-sm text-gray-700">2023.10.04</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 课程资料模块 -->
                <div>
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-semibold">课程资料</h2>
                    </div>

                    <div id="course-materials-list" class="bg-white rounded-lg shadow-md p-4">
                        <!-- 课程资料列表 (一级/二级目录结构) -->

                        <!-- 一级目录 1 -->
                        <div class="mb-2 material-folder-item">
                             <div class="flex items-center justify-between py-2 px-3 hover:bg-gray-100 cursor-pointer rounded group">
                                 <div class="flex items-center material-folder-toggle">
                                     <!-- 目录图标 -->
                                     <i class="fas fa-folder mr-2 text-yellow-500"></i>
                                     <p class="text-gray-800 font-semibold">第一章 概论</p>
                                      <!-- 展开/折叠指示图标 -->
                                     <i class="fas fa-chevron-down ml-2 text-gray-500 group-hover:text-gray-700 transition-transform transform"></i>
                                 </div>
                                 <!-- 右侧操作按钮 -->
                                 <div>
                                     <!-- 上传文件按钮 -->
                                     <button class="text-gray-500 hover:text-gray-700 text-sm" title="上传文件到此目录">
                                         <i class="fas fa-plus"></i>
                                     </button>
                                 </div>
                             </div>
                             <!-- 二级目录/文件 -->
                             <div class="ml-6 mt-1 material-nested-content">
                                 <div class="flex items-center justify-between py-2 px-3 hover:bg-gray-100 cursor-pointer rounded">
                                     <div class="flex items-center">
                                         <!-- 文件图标 -->
                                         <i class="fas fa-file-alt mr-2 text-gray-500"></i>
                                         <p class="text-gray-800">第一节 课程介绍.pdf</p>
                                     </div>
                                      <!-- 可选：文件操作按钮 -->
                                     <div>
                                         <button class="text-gray-500 hover:text-gray-700 text-sm">下载</button>
                                     </div>
                                 </div>
                                  <div class="flex items-center justify-between py-2 px-3 hover:bg-gray-100 cursor-pointer rounded">
                                     <div class="flex items-center">
                                         <!-- 文件图标 -->
                                         <i class="fas fa-file-alt mr-2 text-gray-500"></i>
                                         <p class="text-gray-800">第一节 教学大纲.docx</p>
                                     </div>
                                      <!-- 可选：文件操作按钮 -->
                                     <div>
                                         <button class="text-gray-500 hover:text-gray-700 text-sm">下载</button>
                                     </div>
                                 </div>
                             </div>
                        </div>

                        <!-- 一级目录 2 -->
                        <div class="mb-2 material-folder-item">
                             <div class="flex items-center justify-between py-2 px-3 hover:bg-gray-100 cursor-pointer rounded group">
                                 <div class="flex items-center material-folder-toggle">
                                     <!-- 目录图标 -->
                                     <i class="fas fa-folder mr-2 text-yellow-500"></i>
                                     <p class="text-gray-800 font-semibold">第二章 线性方程组</p>
                                      <!-- 展开/折叠指示图标 -->
                                     <i class="fas fa-chevron-down ml-2 text-gray-500 group-hover:text-gray-700 transition-transform transform"></i>
                                 </div>
                                 <!-- 右侧操作按钮 -->
                                 <div>
                                     <!-- 上传文件按钮 -->
                                     <button class="text-gray-500 hover:text-gray-700 text-sm" title="上传文件到此目录">
                                         <i class="fas fa-plus"></i>
                                     </button>
                                 </div>
                             </div>
                             <!-- 二级目录/文件 -->
                             <div class="ml-6 mt-1 material-nested-content hidden">
                                 <!-- Add nested content here -->
                                  <div class="flex items-center justify-between py-2 px-3 hover:bg-gray-100 cursor-pointer rounded">
                                     <div class="flex items-center">
                                         <!-- 文件图标 -->
                                         <i class="fas fa-file-alt mr-2 text-gray-500"></i>
                                         <p class="text-gray-800">第二章 第一节 线性方程组.pdf</p>
                                     </div>
                                      <!-- 可选：文件操作按钮 -->
                                     <div>
                                         <button class="text-gray-500 hover:text-gray-700 text-sm">下载</button>
                                     </div>
                                 </div>
                             </div>
                        </div>

                        <!-- 更多课程资料 (如果需要分页或加载更多) -->

                        <!-- 交互逻辑说明 -->
                        <!-- 点击一级目录标题（除加号区域）可以展开/折叠其下的二级目录或文件 -->
                        <!-- 点击文件可以下载或预览 -->
                        <!-- 上传按钮可以上传新的文件，并选择存放的目录 -->
                         <!-- 点击一级目录旁的加号按钮可以上传文件到该目录 -->
                        <!-- 点击添加章节按钮可以添加一级目录 -->

                    </div>
                </div>
            </div>

            <!-- 课程报告内容区域 -->
            <div id="question-bank-content" class="hidden">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <!-- Charts Row -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                        <!-- 作业成绩折线图 -->
                        <div class="bg-white rounded-lg shadow-md p-6 border border-gray-200">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">作业成绩折线图</h3>
                            <div class="relative w-full h-64 bg-gray-50 rounded-md pt-4 pl-8 pr-4 pb-8">
                                <!-- Y-axis labels -->
                                <div class="absolute left-0 top-4 h-[calc(100%-32px)] flex flex-col justify-between py-0 text-xs text-gray-500">
                                    <span>100</span>
                                    <span>80</span>
                                    <span>60</span>
                                    <span>40</span>
                                    <span>20</span>
                                    <span>0</span>
                                </div>
                                <!-- Actual plotting area, offset for Y-axis labels -->
                                <div class="absolute inset-y-4 left-8 right-4 border-l border-b border-gray-300">
                                    <!-- Data points (mock) - positioned absolutely within this area -->
                                    <div class="absolute w-2 h-2 bg-blue-500 rounded-full -translate-x-1/2 -translate-y-1/2" style="bottom: 80%; left: 0%;"></div>
                                    <div class="absolute w-2 h-2 bg-blue-500 rounded-full -translate-x-1/2 -translate-y-1/2" style="bottom: 95%; left: 20%;"></div>
                                    <div class="absolute w-2 h-2 bg-blue-500 rounded-full -translate-x-1/2 -translate-y-1/2" style="bottom: 60%; left: 40%;"></div>
                                    <div class="absolute w-2 h-2 bg-blue-500 rounded-full -translate-x-1/2 -translate-y-1/2" style="bottom: 70%; left: 60%;"></div>
                                    <div class="absolute w-2 h-2 bg-blue-500 rounded-full -translate-x-1/2 -translate-y-1/2" style="bottom: 85%; left: 80%;"></div>
                                    <div class="absolute w-2 h-2 bg-blue-500 rounded-full -translate-x-1/2 -translate-y-1/2" style="bottom: 75%; left: 100%;"></div>

                                    <!-- Mock connecting lines (simplified, visual only) -->
                                    <svg class="absolute inset-0 w-full h-full" viewBox="0 0 100 100" preserveAspectRatio="none">
                                        <polyline points="0,20 20,5 40,40 60,30 80,15 100,25" fill="none" stroke="#3B82F6" stroke-width="2" />
                                    </svg>

                                    <!-- X-axis labels (mock) -->
                                    <div class="absolute bottom-0 left-0 w-full flex justify-around text-xs text-gray-500 mt-1">
                                        <span>作业1</span>
                                        <span>作业2</span>
                                        <span>作业3</span>
                                        <span>作业4</span>
                                        <span>作业5</span>
                                        <span>作业6</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 作业提交情况 (饼图) -->
                        <div class="bg-white rounded-lg shadow-md p-6 border border-gray-200">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">作业提交情况 (饼图)</h3>
                            <div class="relative w-full h-64 flex items-center justify-center">
                                <!-- Pie Chart Mockup - simplified using colored blocks and labels -->
                                <div class="flex items-center space-x-6">
                                    <div class="w-48 h-48 rounded-full flex items-center justify-center text-white font-bold text-sm"
                                        style="background: conic-gradient(rgb(74,222,128) 0% 70%, rgb(239,68,68) 70% 90%, rgb(156,163,175) 90% 100%);">
                                        统计图
                                    </div>
                                    <div class="flex flex-col space-y-2">
                                        <div class="flex items-center">
                                            <span class="w-3 h-3 bg-green-500 rounded-full mr-2"></span>
                                            <span class="text-gray-700">正常提交: 70%</span>
                                        </div>
                                        <div class="flex items-center">
                                            <span class="w-3 h-3 bg-red-500 rounded-full mr-2"></span>
                                            <span class="text-gray-700">逾期提交: 20%</span>
                                        </div>
                                        <div class="flex items-center">
                                            <span class="w-3 h-3 bg-gray-400 rounded-full mr-2"></span>
                                            <span class="text-gray-700">未提交: 10%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 我的问题 (AI分析高频关联知识点, 排列问题) -->
                    <div id="my-questions-section" class="bg-white rounded-lg shadow-md p-6 border border-gray-200">
                        <div id="my-questions-main-header" class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-gray-800">我的问题 (AI分析高频关联知识点, 排列问题)</h3>
                            <button class="text-blue-500 hover:text-blue-600 text-sm flex items-center">
                                <i class="fas fa-tags mr-1"></i>根据知识点对问题聚类
                            </button>
                        </div>
                        <!-- New back button/header for detailed view -->
                        <div id="my-questions-detail-header" class="hidden mb-4 items-center">
                            <button id="back-to-all-questions" class="text-gray-500 hover:text-gray-700 text-sm mr-2">
                                <i class="fas fa-arrow-left mr-1"></i> 返回
                            </button>
                            <h4 id="knowledge-point-title" class="text-lg font-semibold text-gray-800"></h4>
                        </div>

                        <!-- This container defines the fixed height and overflow for the animating sections -->
                        <div id="my-questions-container" class="bg-gray-50 rounded-md border border-gray-300 h-96 relative overflow-hidden">
                            <!-- Container for all knowledge cards -->
                            <div id="knowledge-cards-view" class="absolute inset-0 transition-all duration-500 ease-in-out">
                                <div class="p-4 space-y-4 overflow-y-auto h-full w-full">
                                    <!-- 模拟问题列表 -->
                                    <div id="knowledge-card-linear-equation" class="border border-gray-200 rounded-lg p-4 bg-white shadow-sm cursor-pointer">
                                        <div class="flex items-center space-x-2 mb-2">
                                            <span class="px-2 py-1 bg-purple-100 text-purple-800 text-xs font-semibold rounded">知识点: 线性方程组</span>
                                        </div>
                                        <p class="text-gray-900 font-medium mb-1">问题1: 求解线性方程组 $2x + 3y = 7$, $x - y = 1$。</p>
                                        <p class="text-sm text-gray-600">AI分析: 该问题考察线性方程组的求解方法，涉及加减消元法或代入消元法。高频错误是计算错误。</p>
                                    </div>
                                    <div class="border border-gray-200 rounded-lg p-4 bg-white shadow-sm">
                                        <div class="flex items-center space-x-2 mb-2">
                                            <span class="px-2 py-1 bg-purple-100 text-purple-800 text-xs font-semibold rounded">知识点: 矩阵运算</span>
                                        </div>
                                        <p class="text-gray-900 font-medium mb-1">问题2: 计算矩阵乘法 $\begin{pmatrix} 1 & 2 \\ 3 & 4 \end{pmatrix} \times \begin{pmatrix} 5 & 6 \\ 7 & 8 \end{pmatrix}$。</p>
                                        <p class="text-sm text-gray-600">AI分析: 该问题考察矩阵乘法的基本规则。高频错误是矩阵乘法顺序或元素相乘求和错误。</p>
                                    </div>
                                    <div class="border border-gray-200 rounded-lg p-4 bg-white shadow-sm">
                                        <div class="flex items-center space-x-2 mb-2">
                                            <span class="px-2 py-1 bg-purple-100 text-purple-800 text-xs font-semibold rounded">知识点: 微积分基本概念</span>
                                        </div>
                                        <p class="text-gray-900 font-medium mb-1">问题3: 求函数 $f(x) = x^3 - 2x^2 + 5$ 在 $x=1$ 处的导数。</p>
                                        <p class="text-sm text-gray-600">AI分析: 该问题考察导数的计算，涉及幂函数求导法则。高频错误是常数项导数为0的遗漏。</p>
                                    </div>
                                    <!-- 更多模拟问题，用于展示滑动效果 -->
                                    <div class="border border-gray-200 rounded-lg p-4 bg-white shadow-sm">
                                        <div class="flex items-center space-x-2 mb-2">
                                            <span class="px-2 py-1 bg-purple-100 text-purple-800 text-xs font-semibold rounded">知识点: 概率论</span>
                                        </div>
                                        <p class="text-gray-900 font-medium mb-1">问题4: 什么是条件概率？请举例说明。</p>
                                        <p class="text-sm text-gray-600">AI分析: 该问题考察条件概率的定义和应用。高频错误是混淆条件概率与联合概率。</p>
                                    </div>
                                    <div class="border border-gray-200 rounded-lg p-4 bg-white shadow-sm">
                                        <div class="flex items-center space-x-2 mb-2">
                                            <span class="px-2 py-1 bg-purple-100 text-purple-800 text-xs font-semibold rounded">知识点: 组合数学</span>
                                        </div>
                                        <p class="text-gray-900 font-medium mb-1">问题5: 从5个不同球中取3个球，有多少种组合方式？</p>
                                        <p class="text-sm text-gray-600">AI分析: 该问题考察组合的计算，涉及组合公式C(n,k)。高频错误是与排列混淆。</p>
                                    </div>
                                    <div class="border border-gray-200 rounded-lg p-4 bg-white shadow-sm">
                                        <div class="flex items-center space-x-2 mb-2">
                                            <span class="px-2 py-1 bg-purple-100 text-purple-800 text-xs font-semibold rounded">知识点: 线性代数</span>
                                        </div>
                                        <p class="text-gray-900 font-medium mb-1">问题6: 什么是特征值和特征向量？</p>
                                        <p class="text-sm text-gray-600">AI分析: 该问题考察特征值和特征向量的基本概念。高频错误是概念混淆或计算错误。</p>
                                    </div>
                                </div>
                            </div>
                            <!-- Container for detailed questions (initially hidden) -->
                            <div id="detailed-questions-view" class="absolute inset-0 transition-all duration-500 ease-in-out hidden opacity-0 translate-x-full">
                                <div class="p-4 space-y-4 overflow-y-auto h-full w-full">
                                    <!-- Detailed questions will be loaded here dynamically -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- AI错题本内容区域 -->
            <div id="ai-mistakes-content" class="hidden">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <!-- 统计信息 -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                        <!-- 总错题数 -->
                        <div class="bg-white rounded-lg shadow-md p-6 border border-gray-200">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-500">总错题数</p>
                                    <p class="text-2xl font-bold text-gray-900">24</p>
                                </div>
                                <div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-exclamation-circle text-red-500 text-xl"></i>
                                </div>
                            </div>
                        </div>
                        <!-- 已掌握知识点 -->
                        <div class="bg-white rounded-lg shadow-md p-6 border border-gray-200">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-500">已掌握知识点</p>
                                    <p class="text-2xl font-bold text-gray-900">8</p>
                                </div>
                                <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-check-circle text-green-500 text-xl"></i>
                                </div>
                            </div>
                        </div>
                        <!-- 待复习知识点 -->
                        <div class="bg-white rounded-lg shadow-md p-6 border border-gray-200">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-500">待复习知识点</p>
                                    <p class="text-2xl font-bold text-gray-900">5</p>
                                </div>
                                <div class="w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-clock text-yellow-500 text-xl"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 错题列表 -->
                    <div class="bg-white rounded-lg shadow-md p-6 border border-gray-200">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-lg font-semibold text-gray-800">错题列表</h3>
                            <div class="flex space-x-4">
                                <select class="border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                    <option value="all">所有知识点</option>
                                    <option value="linear">线性代数</option>
                                    <option value="calculus">微积分</option>
                                    <option value="probability">概率论</option>
                                </select>
                                <button class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md text-sm">
                                    <i class="fas fa-sync-alt mr-2"></i>刷新
                                </button>
                            </div>
                        </div>

                        <!-- 错题卡片列表 -->
                        <div class="space-y-4">
                            <!-- 错题卡片1 -->
                            <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
                                <div class="flex items-center justify-between mb-2">
                                    <div class="flex items-center space-x-2">
                                        <span class="px-2 py-1 bg-red-100 text-red-800 text-xs font-semibold rounded">线性代数</span>
                                        <span class="px-2 py-1 bg-gray-100 text-gray-800 text-xs font-semibold rounded">矩阵运算</span>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <span class="text-sm text-gray-500">错误次数: 3</span>
                                        <button class="text-blue-500 hover:text-blue-600">
                                            <i class="fas fa-chevron-down"></i>
                                        </button>
                                    </div>
                                </div>
                                <p class="text-gray-900 font-medium mb-2">问题：计算矩阵乘法 $\begin{pmatrix} 1 & 2 \\ 3 & 4 \end{pmatrix} \times \begin{pmatrix} 5 & 6 \\ 7 & 8 \end{pmatrix}$</p>
                                <div class="text-sm text-gray-600">
                                    <p class="mb-1">你的答案：$\begin{pmatrix} 19 & 22 \\ 43 & 50 \end{pmatrix}$</p>
                                    <p class="mb-1">正确答案：$\begin{pmatrix} 19 & 22 \\ 43 & 50 \end{pmatrix}$</p>
                                    <p class="text-red-500">错误分析：计算过程中出现了符号错误，导致最终结果不正确。</p>
                                </div>
                            </div>

                            <!-- 错题卡片2 -->
                            <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
                                <div class="flex items-center justify-between mb-2">
                                    <div class="flex items-center space-x-2">
                                        <span class="px-2 py-1 bg-red-100 text-red-800 text-xs font-semibold rounded">微积分</span>
                                        <span class="px-2 py-1 bg-gray-100 text-gray-800 text-xs font-semibold rounded">导数应用</span>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <span class="text-sm text-gray-500">错误次数: 2</span>
                                        <button class="text-blue-500 hover:text-blue-600">
                                            <i class="fas fa-chevron-down"></i>
                                        </button>
                                    </div>
                                </div>
                                <p class="text-gray-900 font-medium mb-2">问题：求函数 $f(x) = x^3 - 2x^2 + 5$ 在 $x=1$ 处的导数。</p>
                                <div class="text-sm text-gray-600">
                                    <p class="mb-1">你的答案：$f'(1) = 2$</p>
                                    <p class="mb-1">正确答案：$f'(1) = -1$</p>
                                    <p class="text-red-500">错误分析：在计算过程中漏掉了常数项的导数。</p>
                                </div>
                            </div>

                            <!-- 错题卡片3 -->
                            <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
                                <div class="flex items-center justify-between mb-2">
                                    <div class="flex items-center space-x-2">
                                        <span class="px-2 py-1 bg-red-100 text-red-800 text-xs font-semibold rounded">概率论</span>
                                        <span class="px-2 py-1 bg-gray-100 text-gray-800 text-xs font-semibold rounded">条件概率</span>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <span class="text-sm text-gray-500">错误次数: 1</span>
                                        <button class="text-blue-500 hover:text-blue-600">
                                            <i class="fas fa-chevron-down"></i>
                                        </button>
                                    </div>
                                </div>
                                <p class="text-gray-900 font-medium mb-2">问题：在掷骰子的实验中，已知点数为偶数，求点数为2的概率。</p>
                                <div class="text-sm text-gray-600">
                                    <p class="mb-1">你的答案：$\frac{1}{6}$</p>
                                    <p class="mb-1">正确答案：$\frac{1}{3}$</p>
                                    <p class="text-red-500">错误分析：没有正确理解条件概率的概念，应该考虑样本空间的变化。</p>
                                </div>
                            </div>
                        </div>

                        <!-- 分页 -->
                        <div class="mt-6 flex justify-center">
                            <nav class="flex items-center space-x-2">
                                <button class="px-3 py-1 rounded-md border border-gray-300 text-sm text-gray-500 hover:bg-gray-50">
                                    上一页
                                </button>
                                <button class="px-3 py-1 rounded-md bg-blue-500 text-white text-sm">
                                    1
                                </button>
                                <button class="px-3 py-1 rounded-md border border-gray-300 text-sm text-gray-500 hover:bg-gray-50">
                                    2
                                </button>
                                <button class="px-3 py-1 rounded-md border border-gray-300 text-sm text-gray-500 hover:bg-gray-50">
                                    3
                                </button>
                                <button class="px-3 py-1 rounded-md border border-gray-300 text-sm text-gray-500 hover:bg-gray-50">
                                    下一页
                                </button>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 新建问题模态框 -->
            <div id="create-question-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
                <div class="bg-white rounded-xl p-6 sm:p-8 max-w-2xl w-full mx-4 shadow-xl transform transition-all relative">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-semibold text-gray-900">新建问题</h3>
                        <button class="text-gray-400 hover:text-gray-500" onclick="hideCreateQuestionModal()" type="button">
                            <i class="fas fa-times text-lg"></i>
                        </button>
                    </div>

                    <!-- 问题类型选择 -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">问题类型:</label>
                        <div class="flex space-x-4">
                            <label class="inline-flex items-center">
                                <input type="radio" class="form-radio text-blue-500" name="question-type" value="multiple-choice" checked>
                                <span class="ml-2 text-gray-700">选择题</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" class="form-radio text-blue-500" name="question-type" value="fill-in-the-blank">
                                <span class="ml-2 text-gray-700">填空题</span>
                            </label>
                        </div>
                    </div>

                    <!-- 问题内容 -->
                    <div class="mb-6">
                        <label for="question-text" class="block text-sm font-medium text-gray-700 mb-2">问题内容:</label>
                        <textarea id="question-text" class="w-full border border-gray-300 rounded-md p-3 text-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-y" rows="3" placeholder="请输入问题内容..."></textarea>
                    </div>

                    <!-- 选择题选项 -->
                    <div id="multiple-choice-options" class="mb-6 space-y-3">
                        <label class="block text-sm font-medium text-gray-700 mb-2">选项:</label>
                        <div class="flex items-center space-x-2">
                            <span class="text-gray-700 font-bold">A.</span>
                            <input type="text" class="option-input w-full border border-gray-300 rounded-md p-2 text-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="选项 A 内容">
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-gray-700 font-bold">B.</span>
                            <input type="text" class="option-input w-full border border-gray-300 rounded-md p-2 text-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="选项 B 内容">
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-gray-700 font-bold">C.</span>
                            <input type="text" class="option-input w-full border border-gray-300 rounded-md p-2 text-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="选项 C 内容">
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-gray-700 font-bold">D.</span>
                            <input type="text" class="option-input w-full border border-gray-300 rounded-md p-2 text-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="选项 D 内容">
                        </div>
                        <div class="mt-2">
                            <label class="block text-sm font-medium text-gray-700 mb-2">正确答案:</label>
                            <div class="flex space-x-4">
                                <label class="inline-flex items-center">
                                    <input type="radio" class="form-radio text-blue-500" name="correct-answer" value="A">
                                    <span class="ml-2 text-gray-700">A</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="radio" class="form-radio text-blue-500" name="correct-answer" value="B">
                                    <span class="ml-2 text-gray-700">B</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="radio" class="form-radio text-blue-500" name="correct-answer" value="C">
                                    <span class="ml-2 text-gray-700">C</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="radio" class="form-radio text-blue-500" name="correct-answer" value="D">
                                    <span class="ml-2 text-gray-700">D</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- 填空题答案 -->
                    <div id="fill-in-the-blank-answer" class="mb-6 hidden">
                        <label for="blank-answer" class="block text-sm font-medium text-gray-700 mb-2">参考答案:</label>
                        <input type="text" id="blank-answer" class="w-full border border-gray-300 rounded-md p-2 text-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="请输入填空答案">
                    </div>

                    <!-- 从其他课程导入 -->
                    <div class="mb-6">
                        <div class="flex items-center justify-between mb-2">
                            <label class="block text-sm font-medium text-gray-700">从其他课程导入:</label>
                            <button class="text-blue-500 hover:text-blue-600 text-sm" onclick="toggleImportSection()">
                                <i class="fas fa-chevron-down mr-1"></i>展开
                            </button>
                        </div>
                        <div id="import-section" class="hidden space-y-4">
                            <!-- 课程选择 -->
                            <div>
                                <select class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                    <option value="">选择课程</option>
                                    <option value="course1">高等数学 (2023级1班)</option>
                                    <option value="course2">线性代数 (2023级2班)</option>
                                    <option value="course3">Python编程 (2023级3班)</option>
                                </select>
                            </div>
                            <!-- 问题列表 -->
                            <div class="border border-gray-200 rounded-md p-3 max-h-48 overflow-y-auto">
                                <div class="space-y-2">
                                    <div class="flex items-center justify-between p-2 hover:bg-gray-50 rounded">
                                        <div>
                                            <p class="text-sm font-medium text-gray-900">以下哪个是正确的HTML标签？</p>
                                            <p class="text-xs text-gray-500">选择题</p>
                                        </div>
                                        <button class="text-blue-500 hover:text-blue-600 text-sm">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                    </div>
                                    <div class="flex items-center justify-between p-2 hover:bg-gray-50 rounded">
                                        <div>
                                            <p class="text-sm font-medium text-gray-900">Python是一种______编程语言。</p>
                                            <p class="text-xs text-gray-500">填空题</p>
                                        </div>
                                        <button class="text-blue-500 hover:text-blue-600 text-sm">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 底部按钮 -->
                    <div class="flex justify-end space-x-3">
                        <button class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" onclick="hideCreateQuestionModal()">
                            取消
                        </button>
                        <button class="px-4 py-2 bg-blue-500 border border-transparent rounded-md text-sm font-medium text-white hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" onclick="saveQuestion()">
                            保存
                        </button>
                    </div>
                </div>
            </div>

            <!-- 提交作业/修改作业弹窗（与 student_homepage.html 保持一致） -->
            <div id="submit-assignment-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden flex items-center justify-center z-50">
                <div class="bg-white rounded-lg shadow-xl p-6 w-[500px] max-w-lg">
                    <div class="flex justify-between items-center mb-4">
                        <h3 id="submit-assignment-modal-title" class="text-lg font-semibold text-gray-900">提交作业</h3>
                        <button id="close-submit-assignment-modal" class="text-gray-400 hover:text-gray-500">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <form id="submit-assignment-form" class="space-y-4">
                        <div>
                            <label for="assignment-name-display" class="block text-sm font-medium text-gray-700">作业名称</label>
                            <p id="assignment-name-display" class="mt-1 text-gray-800 font-semibold"></p>
                        </div>
                        <div>
                            <label for="assignment-file" class="block text-sm font-medium text-gray-700">上传文件</label>
                            <div id="drop-area" class="mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md cursor-pointer hover:border-blue-500 transition-colors duration-200">
                                <div class="space-y-1 text-center">
                                    <svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48" aria-hidden="true">
                                        <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m-4-4v4m-4-4h4m-4 4h4m-4 0v4m-4-4h4m-4 0v4m-4-4h4m-4 0v4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                    </svg>
                                    <div class="flex text-sm text-gray-600">
                                        <label for="file-upload" class="relative cursor-pointer bg-white rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500">
                                            <span>上传文件</span>
                                            <input id="file-upload" name="file-upload" type="file" class="sr-only">
                                        </label>
                                        <p class="pl-1">或拖拽文件到此处</p>
                                    </div>
                                    <p class="text-xs text-gray-500" id="file-name-display"></p>
                                </div>
                            </div>
                        </div>
                        <div>
                            <label for="assignment-notes" class="block text-sm font-medium text-gray-700">备注 (可选)</label>
                            <textarea id="assignment-notes" name="assignment-notes" rows="3" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"></textarea>
                        </div>
                        <div class="flex justify-end space-x-3 mt-6">
                            <button type="button" id="cancel-submit-assignment" class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md">
                                取消
                            </button>
                            <button type="submit" id="confirm-submit-assignment" class="px-4 py-2 text-sm font-medium text-white bg-blue-500 hover:bg-blue-600 rounded-md">
                                提交
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <script>
                // The breadcrumb "我的课程" is now a clickable link back to homepage.html
                // So we remove the separate back button script.
                // const backButton = document.getElementById('back-to-homepage');
                // backButton.addEventListener('click', () => {
                //     window.location.href = 'homepage.html';
                // });

                const assignmentButton = document.querySelector('.flex.border-b button:nth-child(1)');
                const coursewareButton = document.querySelector('.flex.border-b button:nth-child(2)');
                const questionBankButton = document.querySelector('.flex.border-b button:nth-child(3)');
                const aiMistakesButton = document.querySelector('.flex.border-b button:nth-child(4)');
                const assignmentContent = document.getElementById('assignment-content');
                const coursewareContent = document.getElementById('courseware-content');
                const questionBankContent = document.getElementById('question-bank-content');
                const aiMistakesContent = document.getElementById('ai-mistakes-content');

                // Function to switch tabs
                function switchTab(activeTab) {
                    // Remove active class from all buttons
                    assignmentButton.classList.remove('border-blue-500', 'text-gray-700', 'font-semibold', 'border-transparent', 'text-gray-500', 'hover:text-gray-700', 'hover:border-gray-300');
                    assignmentButton.classList.add('py-2', 'px-4', 'text-sm', 'font-medium');

                    coursewareButton.classList.remove('border-blue-500', 'text-gray-700', 'font-semibold', 'border-transparent', 'text-gray-500', 'hover:text-gray-700', 'hover:border-gray-300');
                    coursewareButton.classList.add('py-2', 'px-4', 'text-sm', 'font-medium');

                    questionBankButton.classList.remove('border-blue-500', 'text-gray-700', 'font-semibold', 'border-transparent', 'text-gray-500', 'hover:text-gray-700', 'hover:border-gray-300');
                    questionBankButton.classList.add('py-2', 'px-4', 'text-sm', 'font-medium');

                    aiMistakesButton.classList.remove('border-blue-500', 'text-gray-700', 'font-semibold', 'border-transparent', 'text-gray-500', 'hover:text-gray-700', 'hover:border-gray-300');
                    aiMistakesButton.classList.add('py-2', 'px-4', 'text-sm', 'font-medium');

                    // Hide all content
                    assignmentContent.classList.add('hidden');
                    coursewareContent.classList.add('hidden');
                    questionBankContent.classList.add('hidden');
                    aiMistakesContent.classList.add('hidden');

                    // Add active class to the clicked button and show corresponding content
                    if (activeTab === 'assignment') {
                        assignmentButton.classList.add('text-gray-700', 'border-b-2', 'border-blue-500');
                        assignmentContent.classList.remove('hidden');
                    } else if (activeTab === 'courseware') {
                        coursewareButton.classList.add('text-gray-700', 'border-b-2', 'border-blue-500');
                        coursewareContent.classList.remove('hidden');
                    } else if (activeTab === 'question-bank') {
                        questionBankButton.classList.add('text-gray-700', 'border-b-2', 'border-blue-500');
                        questionBankContent.classList.remove('hidden');
                    } else if (activeTab === 'ai-mistakes') {
                        aiMistakesButton.classList.add('text-gray-700', 'border-b-2', 'border-blue-500');
                        aiMistakesContent.classList.remove('hidden');
                    }
                }

                // Add click event listeners
                assignmentButton.addEventListener('click', () => switchTab('assignment'));
                coursewareButton.addEventListener('click', () => switchTab('courseware'));
                questionBankButton.addEventListener('click', () => switchTab('question-bank'));
                aiMistakesButton.addEventListener('click', () => switchTab('ai-mistakes'));

                // Set initial tab to assignment
                switchTab('assignment');

                // JavaScript for Course Materials directory toggle
                document.querySelectorAll('.material-folder-toggle').forEach(folderToggle => {
                    folderToggle.addEventListener('click', (event) => {
                        // Prevent click on the plus icon from toggling the folder
                        if (event.target.closest('button')) {
                            return;
                        }

                        const nestedContent = folderToggle.closest('.material-folder-item').querySelector('.material-nested-content');
                        const toggleIcon = folderToggle.querySelector('i.fas:last-child'); // Select the chevron icon

                        // Toggle the hidden class on the nested content
                        nestedContent.classList.toggle('hidden');

                        // Update the icon based on the new state
                        if (nestedContent.classList.contains('hidden')) {
                            toggleIcon.classList.remove('fa-chevron-up', 'rotate-180');
                            toggleIcon.classList.add('fa-chevron-down');
                        } else {
                            toggleIcon.classList.remove('fa-chevron-down');
                            toggleIcon.classList.add('fa-chevron-up', 'rotate-180');
                        }
                    });
                });

                // Function to set initial icons based on hidden state for all folders
                function initializeFolderIcons() {
                    document.querySelectorAll('.material-folder-item').forEach(folderItem => {
                        const nestedContent = folderItem.querySelector('.material-nested-content');
                        const toggleIcon = folderItem.querySelector('.material-folder-toggle i.fas:last-child'); // Select the chevron icon

                        if (nestedContent.classList.contains('hidden')) {
                            toggleIcon.classList.remove('fa-chevron-up', 'rotate-180');
                            toggleIcon.classList.add('fa-chevron-down');
                        } else {
                            toggleIcon.classList.remove('fa-chevron-down');
                            toggleIcon.classList.add('fa-chevron-up', 'rotate-180');
                        }
                    });
                }

                // Add event listeners for upload and add chapter buttons (placeholders)
                document.querySelectorAll('.material-folder-item button i.fa-plus').forEach(uploadButtonIcon => {
                    uploadButtonIcon.closest('button').addEventListener('click', () => {
                        alert('模拟：点击了一级目录的上传文件按钮');
                        // Add actual file upload logic here
                    });
                });

                const addChapterButton = document.querySelector('.flex.justify-between.items-center.mb-4 button i.fa-plus')?.closest('button');
                if (addChapterButton) {
                    addChapterButton.addEventListener('click', () => {
                        alert('模拟：点击了添加章节按钮');
                        // Add logic to add a new chapter (一级目录) here
                    });
                }

                const uploadMaterialButton = document.querySelector('.flex.justify-between.items-center.mb-4 button i.fa-upload')?.closest('button');
                if (uploadMaterialButton) {
                    uploadMaterialButton.addEventListener('click', () => {
                        alert('模拟：点击了课程资料上传按钮');
                        // Add logic to upload materials here
                    });
                }

                // 课堂大纲翻页功能
                const nextOutlinePage = document.getElementById('next-outline-page');
                const prevOutlinePage = document.getElementById('prev-outline-page');
                const hiddenOutlines = document.getElementById('hidden-outlines');
                const firstPageOutlines = document.querySelector('.flex.items-center.space-x-4.overflow-x-hidden.pb-4');

                // 检查是否有更多课堂大纲
                function checkMoreOutlines() {
                    const totalOutlines = document.querySelectorAll('.flex-none.w-64.bg-white').length;
                    const outlinesPerPage = 4;
                    const hasMore = totalOutlines > outlinesPerPage;

                    // 控制右箭头的显示/隐藏
                    if (nextOutlinePage) {
                        nextOutlinePage.style.display = hasMore ? 'flex' : 'none';
                    }
                }

                nextOutlinePage.addEventListener('click', () => {
                    firstPageOutlines.classList.add('hidden');
                    hiddenOutlines.classList.remove('hidden');
                });

                prevOutlinePage.addEventListener('click', () => {
                    hiddenOutlines.classList.add('hidden');
                    firstPageOutlines.classList.remove('hidden');
                });

                // 初始化时检查是否有更多课堂大纲
                checkMoreOutlines();

                // 作业卡片点击事件
                document.querySelectorAll('.assignment-card').forEach(card => {
                    card.addEventListener('click', (e) => {
                        // 如果点击的是按钮，不触发卡片点击事件
                        if (e.target.closest('button')) {
                            return;
                        }

                        const assignmentTitle = card.querySelector('p.text-gray-900').textContent;
                        const assignmentId = assignmentTitle.replace(/[^0-9]/g, ''); // 简单地从标题中提取数字作为ID

                        // 跳转到作业详情页面
                        window.location.href = `student_assignment_details.html?id=${assignmentId}`;
                    });
                });

                // 问题库相关功能
                const questionTypeSelect = document.querySelector('#question-bank-content select');
                const searchInput = document.querySelector('#question-bank-content input[type="text"]');
                const questionList = document.querySelector('#question-bank-content .space-y-4');

                // 搜索功能
                if (searchInput) {
                    searchInput.addEventListener('input', (e) => {
                        const searchTerm = e.target.value.toLowerCase();
                        const questions = questionList.querySelectorAll('.border');

                        questions.forEach(question => {
                            const questionText = question.querySelector('h3').textContent.toLowerCase();
                            const questionType = question.querySelector('.text-gray-500') ? question.querySelector('.text-gray-500').textContent.toLowerCase() : '';

                            if (questionText.includes(searchTerm) || questionType.includes(searchTerm)) {
                                question.style.display = '';
                            } else {
                                question.style.display = 'none';
                            }
                        });
                    });
                }

                // 类型筛选
                if (questionTypeSelect) {
                    questionTypeSelect.addEventListener('change', (e) => {
                        const selectedType = e.target.value;
                        const questions = questionList.querySelectorAll('.border');

                        questions.forEach(question => {
                            const questionType = question.querySelector('.text-gray-500') ? question.querySelector('.text-gray-500').textContent.toLowerCase() : '';

                            if (selectedType === 'all' || questionType.includes(selectedType)) {
                                question.style.display = '';
                            } else {
                                question.style.display = 'none';
                            }
                        });
                    });
                }

                // 新建问题相关功能
                function showCreateQuestionModal() {
                    document.getElementById('create-question-modal').classList.remove('hidden');
                }

                function hideCreateQuestionModal() {
                    document.getElementById('create-question-modal').classList.add('hidden');
                }

                function toggleImportSection() {
                    const importSection = document.getElementById('import-section');
                    const toggleButton = importSection.previousElementSibling.querySelector('button');
                    const icon = toggleButton.querySelector('i');

                    if (importSection.classList.contains('hidden')) {
                        importSection.classList.remove('hidden');
                        icon.classList.remove('fa-chevron-down');
                        icon.classList.add('fa-chevron-up');
                        toggleButton.innerHTML = '<i class="fas fa-chevron-up mr-1"></i>收起';
                    } else {
                        importSection.classList.add('hidden');
                        icon.classList.remove('fa-chevron-up');
                        icon.classList.add('fa-chevron-down');
                        toggleButton.innerHTML = '<i class="fas fa-chevron-down mr-1"></i>展开';
                    }
                }

                // 问题类型切换
                document.querySelectorAll('input[name="question-type"]').forEach(radio => {
                    radio.addEventListener('change', (e) => {
                        const multipleChoiceOptions = document.getElementById('multiple-choice-options');
                        const fillInTheBlankAnswer = document.getElementById('fill-in-the-blank-answer');

                        if (e.target.value === 'multiple-choice') {
                            multipleChoiceOptions.classList.remove('hidden');
                            fillInTheBlankAnswer.classList.add('hidden');
                        } else {
                            multipleChoiceOptions.classList.add('hidden');
                            fillInTheBlankAnswer.classList.remove('hidden');
                        }
                    });
                });

                // 保存问题
                function saveQuestion() {
                    // 这里添加保存问题的逻辑
                    alert('问题保存成功！');
                    hideCreateQuestionModal();
                }

                // 修改新建问题按钮点击事件
                const newQuestionButton = document.querySelector('#question-bank-content button:last-child');
                if (newQuestionButton) {
                    newQuestionButton.addEventListener('click', () => {
                        showCreateQuestionModal();
                    });
                }

                // 从其他课程导入问题
                document.querySelectorAll('#import-section .fa-plus').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const questionCard = e.target.closest('.flex.items-center');
                        const questionText = questionCard.querySelector('p').textContent;
                        alert(`已导入问题：${questionText}`);
                    });
                });

                // 提交作业弹窗相关功能
                document.addEventListener('DOMContentLoaded', () => {
                    const submitAssignmentModal = document.getElementById('submit-assignment-modal');
                    const submitAssignmentModalTitle = document.getElementById('submit-assignment-modal-title');
                    const assignmentNameDisplay = document.getElementById('assignment-name-display');
                    const closeSubmitAssignmentModal = document.getElementById('close-submit-assignment-modal');
                    const cancelSubmitAssignment = document.getElementById('cancel-submit-assignment');
                    const confirmSubmitAssignment = document.getElementById('confirm-submit-assignment');
                    const assignmentFile = document.getElementById('file-upload');
                    const dropArea = document.getElementById('drop-area');
                    const fileNameDisplay = document.getElementById('file-name-display');
                    const assignmentNotes = document.getElementById('assignment-notes');

                    let currentFile = null; // 用于存储当前选中的文件

                    // 为所有作业卡片添加点击事件
                    document.querySelectorAll('.assignment-card').forEach(card => {
                        card.addEventListener('click', (e) => {
                            // 如果点击的是按钮，不触发卡片点击事件
                            if (e.target.closest('button')) {
                                return;
                            }

                            const assignmentTitle = card.querySelector('p.text-gray-900').textContent;
                            const assignmentId = assignmentTitle.replace(/[^0-9]/g, ''); // 简单地从标题中提取数字作为ID

                            // 跳转到作业详情页面
                            window.location.href = `student_assignment_details.html?id=${assignmentId}`;
                        });
                    });

                    // 修复：使用事件委托来处理动态添加的按钮
                    document.body.addEventListener('click', function(e) {
                        // 检查点击的是否是作业卡片中的按钮
                        const button = e.target.closest('.assignment-action-button');
                        if (!button) return;
                        
                        e.stopPropagation(); // 阻止事件冒泡
                        const card = button.closest('.assignment-card');
                        const assignmentTitle = card.querySelector('p.text-gray-900').textContent;
                        const buttonText = button.textContent.trim();
                        
                        // 修复：使用更灵活的文本匹配方式
                        if (buttonText.includes('提交作业') || buttonText.includes('修改提交')) {
                            showSubmitAssignmentModal(buttonText.includes('修改') ? '修改作业' : '提交作业', assignmentTitle);
                        }
                    });

                    function showSubmitAssignmentModal(title, assignmentText) {
                        if (submitAssignmentModal) {
                            submitAssignmentModal.classList.remove('hidden');
                            if (submitAssignmentModalTitle) submitAssignmentModalTitle.textContent = title;
                            if (assignmentNameDisplay) assignmentNameDisplay.textContent = assignmentText;
                            // 重置文件和备注
                            currentFile = null;
                            if (fileNameDisplay) fileNameDisplay.textContent = '';
                            if (assignmentFile) assignmentFile.value = '';
                            if (assignmentNotes) assignmentNotes.value = '';
                        }
                    }

                    function closeSubmitAssignmentModalFunc() {
                        if (submitAssignmentModal) {
                            submitAssignmentModal.classList.add('hidden');
                        }
                    }

                    // 关闭弹窗按钮
                    if (closeSubmitAssignmentModal) {
                        closeSubmitAssignmentModal.addEventListener('click', (e) => {
                            e.preventDefault();
                            closeSubmitAssignmentModalFunc();
                        });
                    }

                    // 取消按钮
                    if (cancelSubmitAssignment) {
                        cancelSubmitAssignment.addEventListener('click', (e) => {
                            e.preventDefault();
                            closeSubmitAssignmentModalFunc();
                        });
                    }

                    // 点击弹窗外部关闭
                    if (submitAssignmentModal) {
                        submitAssignmentModal.addEventListener('click', (e) => {
                            if (e.target === submitAssignmentModal) {
                                closeSubmitAssignmentModalFunc();
                            }
                        });
                    }

                    // 文件上传逻辑 (拖拽)
                    if (dropArea) {
                        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                            dropArea.addEventListener(eventName, preventDefaults, false);
                        });

                        function preventDefaults(e) {
                            e.preventDefault();
                            e.stopPropagation();
                        }

                        ['dragenter', 'dragover'].forEach(eventName => {
                            dropArea.addEventListener(eventName, highlight, false);
                        });

                        ['dragleave', 'drop'].forEach(eventName => {
                            dropArea.addEventListener(eventName, unhighlight, false);
                        });

                        function highlight() {
                            dropArea.classList.add('border-blue-500', 'bg-blue-50');
                        }

                        function unhighlight() {
                            dropArea.classList.remove('border-blue-500', 'bg-blue-50');
                        }

                        dropArea.addEventListener('drop', handleDrop, false);

                        function handleDrop(e) {
                            const dt = e.dataTransfer;
                            const files = dt.files;
                            handleFiles(files);
                        }
                    }

                    // 文件上传逻辑 (点击选择文件)
                    if (assignmentFile) {
                        assignmentFile.addEventListener('change', (e) => {
                            handleFiles(e.target.files);
                        });
                    }

                    function handleFiles(files) {
                        if (files.length > 0) {
                            currentFile = files[0];
                            if (fileNameDisplay) {
                                fileNameDisplay.textContent = `已选择文件: ${currentFile.name}`;
                            }
                        } else {
                            currentFile = null;
                            if (fileNameDisplay) {
                                fileNameDisplay.textContent = '';
                            }
                        }
                    }

                    // 提交作业逻辑
                    if (confirmSubmitAssignment) {
                        confirmSubmitAssignment.addEventListener('click', (e) => {
                            e.preventDefault();
                            if (!currentFile) {
                                alert('请先选择要上传的作业文件！');
                                return;
                            }
                            const notes = assignmentNotes ? assignmentNotes.value : '';
                            const assignmentTitle = assignmentNameDisplay ? assignmentNameDisplay.textContent : '';
                            alert(`作业 "${assignmentTitle}" 已成功提交！\n文件: ${currentFile.name}\n备注: ${notes}`);
                            closeSubmitAssignmentModalFunc();
                        });
                    }

                    // 我的问题板块交互
                    const myQuestionsSection = document.getElementById('my-questions-section');
                    const myQuestionsMainHeader = document.getElementById('my-questions-main-header');
                    const myQuestionsDetailHeader = document.getElementById('my-questions-detail-header');
                    const backToAllQuestionsBtn = document.getElementById('back-to-all-questions');
                    const knowledgePointTitle = document.getElementById('knowledge-point-title');

                    const myQuestionsContainer = document.getElementById('my-questions-container');
                    const knowledgeCardsView = document.getElementById('knowledge-cards-view');
                    const detailedQuestionsView = document.getElementById('detailed-questions-view');

                    // Store initial HTML of knowledge cards view for reset
                    const initialKnowledgeCardsHtml = knowledgeCardsView.innerHTML; // Store initial HTML of knowledge cards view

                    // Mock data for specific knowledge point questions (for "线性方程组" as example)
                    const linearEquationQuestionsHtml = `
                        <div class="border border-gray-200 rounded-lg p-4 bg-white shadow-sm">
                            <div class="flex items-center space-x-2 mb-2">
                                <span class="px-2 py-1 bg-purple-100 text-purple-800 text-xs font-semibold rounded">知识点: 线性方程组</span>
                            </div>
                            <p class="text-gray-900 font-medium mb-1">问题A: 什么是线性方程组的解？</p>
                            <p class="text-sm text-gray-600">AI分析: 解释线性方程组的解的定义。</p>
                        </div>
                        <div class="border border-gray-200 rounded-lg p-4 bg-white shadow-sm">
                            <div class="flex items-center space-x-2 mb-2">
                                <span class="px-2 py-1 bg-purple-100 text-purple-800 text-xs font-semibold rounded">知识点: 线性方程组</span>
                            </div>
                            <p class="text-gray-900 font-medium mb-1">问题B: 用高斯消元法解线性方程组 $x + y = 3$, $2x - y = 0$。</p>
                            <p class="text-sm text-gray-600">AI分析: 演示高斯消元法的步骤。</p>
                        </div>
                        <div class="border border-gray-200 rounded-lg p-4 bg-white shadow-sm">
                            <div class="flex items-center space-x-2 mb-2">
                                <span class="px-2 py-1 bg-purple-100 text-purple-800 text-xs font-semibold rounded">知识点: 线性方程组</span>
                            </div>
                            <p class="text-gray-900 font-medium mb-1">问题C: 线性方程组何时有唯一解、无解或无穷多解？</p>
                            <p class="text-sm text-gray-600">AI分析: 讨论线性方程组解的判定条件。</p>
                        </div>
                        <div class="border border-gray-200 rounded-lg p-4 bg-white shadow-sm">
                            <div class="flex items-center space-x-2 mb-2">
                                <span class="px-2 py-1 bg-purple-100 text-purple-800 text-xs font-semibold rounded">知识点: 线性方程组</span>
                            </div>
                            <p class="text-gray-900 font-medium mb-1">问题D: 简述克拉默法则在求解线性方程组中的应用。</p>
                            <p class="text-sm text-gray-600">AI分析: 克拉默法则的原理和适用范围。</p>
                        </div>
                    `;

                    // Function to show specific knowledge point questions with animation
                    function showKnowledgePointQuestions(knowledgePoint) {
                        knowledgePointTitle.textContent = knowledgePoint;

                        // 1. Hide main header and show detail header
                        myQuestionsMainHeader.classList.add('hidden');
                        myQuestionsDetailHeader.classList.remove('hidden');
                        myQuestionsDetailHeader.classList.add('flex'); // Ensure it's flex for alignment

                        // 2. Animate out current knowledge cards
                        knowledgeCardsView.classList.remove('opacity-100', 'translate-x-0');
                        knowledgeCardsView.classList.add('opacity-0', '-translate-x-full');

                        setTimeout(() => {
                            knowledgeCardsView.classList.add('hidden'); // Hide after animation
                            detailedQuestionsView.innerHTML = `<div class="p-4 space-y-4 overflow-y-auto h-full w-full">${linearEquationQuestionsHtml}</div>`; // Load content into inner div

                            // 3. Animate in detailed questions
                            detailedQuestionsView.classList.remove('hidden', 'opacity-0', 'translate-x-full');
                            detailedQuestionsView.classList.add('opacity-100', 'translate-x-0');
                        }, 500); // Match this timeout to the CSS transition duration
                    }

                    // Function to show all questions with animation
                    function showAllQuestions() {
                        // 1. Hide detail header and show main header
                        myQuestionsDetailHeader.classList.add('hidden');
                        myQuestionsDetailHeader.classList.remove('flex'); // Remove flex when hidden
                        myQuestionsMainHeader.classList.remove('hidden');

                        // 2. Animate out detailed questions
                        detailedQuestionsView.classList.remove('opacity-100', 'translate-x-0');
                        detailedQuestionsView.classList.add('opacity-0', 'translate-x-full');

                        setTimeout(() => {
                            detailedQuestionsView.classList.add('hidden'); // Hide after animation
                            detailedQuestionsView.innerHTML = ''; // Clear detailed view content

                            // 3. Animate in all knowledge cards
                            knowledgeCardsView.classList.remove('hidden', 'opacity-0', '-translate-x-full');
                            knowledgeCardsView.classList.add('opacity-100', 'translate-x-0');

                            // Restore initial knowledge cards content after they are visible to ensure listeners are active
                            knowledgeCardsView.innerHTML = initialKnowledgeCardsHtml;
                            attachKnowledgeCardClickListener(); // Re-attach listener
                        }, 500); // Match this timeout to the CSS transition duration
                    }

                    // Attach click listener to the first knowledge card
                    function attachKnowledgeCardClickListener() {
                        const firstKnowledgeCard = document.getElementById('knowledge-card-linear-equation');
                        if (firstKnowledgeCard) {
                            firstKnowledgeCard.addEventListener('click', () => {
                                showKnowledgePointQuestions('线性方程组');
                            });
                        }
                    }

                    // Initial attachment of the listener
                    attachKnowledgeCardClickListener();

                    // Add click event to the back button
                    if (backToAllQuestionsBtn) {
                        backToAllQuestionsBtn.addEventListener('click', () => {
                            showAllQuestions();
                        });
                    }
                });
            </script>
        </main>
    </div>
</body>
</html> 